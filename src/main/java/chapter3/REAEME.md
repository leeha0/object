# Chapter3 역할, 책임, 협력
* 객체지향 패러다임의 관점에서 핵심은 `역할, 책임, 협력`이다
* 협력을 구상하기 위해 적절한 객체를 찾고 적절한 책임을 할당하는 것이 객체지향 설계의 핵심이다
* 클래스, 상속, 지연 바인딩은 책임과 협력이 자리잡은 후에 사용할 수 있는 구현 매커니짐일 뿐이다

### 01 협력
#### 영화 예매 시스템 돌아보기
* 협력: 객체들이 애플리케이션의 기능을 구현하기 위해 수행하는 상호작용
* 책임: 객체가 협력에 참여하기 위해 수행하는 로직
* 객체들이 협력 안에서 수행하는 책임들이 모여 객체가 수행하는 역할을 구성한다
* 역할은 책임의 집합이다

#### 협력
* 객체들의 협력을 통해 기능을 구현하며, 객체들은 메시지 전송을 통해 커뮤니케이션 한다
* 메시지를 수신한 객체는 메서드를 실행하여 요청에 응답한다
* 필요한 경우 다른 객체에게 메시지를 전송하여 협력을 요청한다

#### 협력이 설계를 위한 문맥을 결정한다
* 객체의 행동을 결정하는 것은 객체가 참여하고 있는 협력이다
* 객체가 협력에 참여하는 이유는 협력에 필요한 적절한 행동을 보유하고 있기 때문이다
* 객체의 행동을 결정하는 것이 협력이라면 객체의 상태를 결정하는 것이 행동이다
* 객체가 참여하는 협력이 객체를 구성하는 행동과 상태 모두를 결정한다
* 협력은 객체를 설계하는데 필요한 일종의 문맥을 제공한다

### 02 책임
#### 책임이란 무엇인가
* 책임: 협력에 참여하기 위해 객체가 수행하는 행동으로 응집도 있는 행위의 집합
* 객체의 책임은 `하는 것`과 `아는 것` 두가지 범주로 세분화 한다
* 협력 안에서 객체에게 할당한 책임이 외부의 인터페이스와 내부의 속성을 결정한다

> 메시지 vs 책임  
> : 책임은 객체가 수행할 수 있는 행동을 종합적이고 간략하게 서술하기 때문에 메시지보다 추상적이고 개념적으로 더 크다

#### 책임 할당
* 객체를 자율적인 존재로 말들기 위해서는 책임을 수행하는데 필요한 정보를 잘 알고 있는 전문가에게 할당하는 것이 좋다 
    → `정보 전문가(Information Expert) 패턴`
* 책임 수행: 메시지 전송
* 책임 할당: 메시지 이름을 결정하고 메시지를 처리할 적절한 객체를 선택
* 협력에 필요한 메시지를 찾고 메시지에 적절한 객체를 선택하는 반복적인 과정을 통해 설계가 이루어진다 
    → `객체들의 인터페이스와 오퍼레이션 목록`

#### 책임 주도 설계
* 책임 주도 설계: 책임을 갖고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계
* 책임 주도 설계 과정
    * 시스템 책임 파악
    * 더 작은 책임으로 분할
    * 책임을 수행할 적절한 객체 또는 역할에게 책임 할당
    * 협력이 필요한 경우 이를 수행할 적절한 객체 또는 역할에게 책임을 할당
* 책임을 할당할 때 고려해야 하는 두 가지 요소
    * 메시지가 객체를 결정한다
    * 행동이 상태를 결정한다

#### 메시지가 객체를 결정한다
* 메시지를 먼저 식별하고 그에 따른 객체를 식별하는 것이 중요하다
* 장점
    * 최소한의 인터페이스를 가질 수 있게 된다 
        - 메시지가 식별될 때까지 객체에 퍼블릭 메서드가 추가되지 않음
    * 충분히 추상적인 인터페이스를 가질 수 있게 된다    
        - 인터페이스는 외부 객체가 요청하는 무엇가를 의미하기 때문에 그에 초점을 맞춘 인터페이스를 얻을 수 있다

#### 행동이 상태를 결정한다
* 객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법이다 
* 객체가 협력에 적합한지를 결정하는 것은 객체의 상태가 아닌 객체의 행동이다
* 데이터 주도 설계: 객체의 내부 구현에 초점을 맞춘 설계 방법

### 03 역할
#### 역할과 협력
* 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합을 역할이라고 한다
* 역할에 객체를 할당한다고 보면 된다
    * 예매하라는 책임은 Screening의 역할
    * 가격을계산하라는 책임은 Movie의 역할

#### 유연하고 재사용 가능한 협력
* 역할을 통해 유연하고 재사용 가능한 협력을 얻을 수 있다
    * 할인 요금을 계산하라는 책임을 AmountDiscountPolicy, PercentDiscountPolicy에 할당하는 것이 맞는가? 
    * 역할은 다른 것으로 교체할 수 있는 책임의 집합이다
    * 역할은 구체적인 객체를 포괄하는 추상화 
* 역할을 구현하는 일반적인 방법은 추상 클래스와 인터페이스를 사용하는 것이다
    
#### 객체 대 역할
* 역할: 협력에 참여하는 후보가 여러 종류의 객체에 의해 수행될 필요가 있을 경우
* 객체: 한 종류의 객체만이 협력에 참여할 필요가 있는 경우

#### 역할과 추상화
* 역할은 공통의 책임을 바탕으로 객체의 종류를 숨기기 때문에 이런 관점에서 객체의 추상화로 볼 수 있다
* 세부 사항에 억눌리지 않고도 상위수준의 정책을 쉽고 간단하게 표현
    * 동일한 협력을 수행하는 객체들을 추상화하여 상위 계층만으로도 객체들을 추상화 할 수 있다
* 설계를 유연하게 만들 수 있다
    * 협력 안에서 동일한 책임을 수행하는 객체들은 동일한 역할을 수행하기 때문에 서로 대체 가능

#### 배우와 배역
* 배우 = 객체 (=여러 협력/역할에 참여 가능)
* 동일한 배역을 연기하는 배우들 = 동일한 역할을 수행하는 객체들 (=서로 대체 가능)
* 배역 = 역할
* 연극 = 협력
* 극본 = 코드